#jinja2:trim_blocks: True, lstrip_blocks: True
apiVersion: v1beta1
kind: AgentConfig
rendezvousIP: {{ hostvars[agent_based_installer_bootstrap_node][host_ip_keyword] }}
additionalNTPSources:
    - {{ hostvars[agent_based_installer_bootstrap_node]['ntp_server'] }}
hosts:
{% for hostname, network_config in static_network_config.items() %}
  - role: {{ hostvars[hostname]['role'] }}
    hostname: {{ hostname }}
    interfaces:
      - name: {{ network_config.mac_interface_map[0].logical_nic_name }}
        macAddress: {{ network_config.mac_interface_map[0].mac_address }}
    networkConfig:
      {{ network_config.network_yaml | indent(6) }}
{% endfor %}
{% if 'root_device_hint' in hostvars[hostname] and 'root_device_hint_value' in hostvars[hostname] and hostvars[hostname]['root_device_hint'] in roothint_list %}
    rootDeviceHints:
      {{ hostvars[hostname]['root_device_hint'] }}: '{{ hostvars[hostname]['root_device_hint_value'] }}'
{% endif %}
